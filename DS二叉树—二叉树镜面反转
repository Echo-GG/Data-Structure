#include <bits/stdc++.h>
using namespace std;
struct Node{
	Node* left;
	Node* right;
	char data;
	Node(char d):data(d),left(NULL),right(NULL){}	
};
Node* Exchange(Node* root)
{
    if (!root) 
		return NULL;

    Exchange(root->left);
    Exchange(root->right);
    
    Node* tmp = root->left;
    root->left = root->right;
    root->right = tmp;
    return root;
}
Node* PreCreate(const string&s, int& idx)
{
	if(idx>=s.length())
		return NULL;
	char ch = s[idx++];
	if(ch=='#')
		return NULL;
	Node* root = new Node(ch);
	root->left = PreCreate(s,idx);
	root->right = PreCreate(s,idx);
	return  root;
}

void Preorder(Node* root)
{
	if(!root)
		return ;
	cout<<root->data<<" ";
	Preorder(root->left);
	Preorder(root->right);
	
}
void Inorder(Node* root)
{
	if(!root)
		return ;
	Inorder(root->left);
	cout<<root->data<<" ";
	Inorder(root->right);
}
void Postorder(Node* root)
{
	if(!root)
		return ;
	Postorder(root->left);
	Postorder(root->right);
	cout<<root->data<<" ";
}
void LevelOrder(Node* root)
{
	if(!root)
		return ;
	queue<Node*> Q;
	Q.push(root);
	while(!Q.empty())
	{
		Node* current = Q.front();
		cout<<current->data<<" ";
		if(current->left)
			Q.push(current->left);
		if(current->right)
			Q.push(current->right);		
		Q.pop();
	}
	
}

int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		string s;
		cin>>s;
		int idx = 0;
		Node* root = PreCreate(s,idx);
		
		Node* root_ = Exchange(root);
		
		if(root_)
		{
			Preorder(root_);
			cout<<endl;
			Inorder(root_);
			cout<<endl;
			Postorder(root_);
			cout<<endl;
			LevelOrder(root_);
			cout<<endl;	
		}
		else
		{
			cout<<"NULL\nNULL\nNULL\nNULL\n";
		}

	}
	
	return 0;
}
